@using Analyze.Shared.Common.Report;
@using Analyze.Shared.Common.User;
@using Analyze.Shared.Common.Cache;

@model ParList
@{
    ViewBag.Title = "";
    Layout = null;
    object currentUser = Context.Session[CacheConstant.CacheCurrentUser];
    List<Tuple<string, string, string, string>> tuplist = new List<Tuple<string, string, string, string>>();
    if (currentUser != null && currentUser is CurrentUser)
    {
        CurrentUser user = (CurrentUser)currentUser;
        tuplist = user.TupMenue as List<Tuple<string, string, string, string>>;
    }
}

<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no">
    <title>Product Lead信息共享平台</title>
    <link href="~/Content/Login/img/product_hunt_round.ico" rel="icon" type="image/x-icon" />
    <link rel="shortcut icon" href="~/Content/Login/img/product_hunt_round_16px.png" />
    <link href="~/Content/BootStrap/metismenu.min.css" rel="stylesheet" />
    @Styles.Render("~/Content/bootstrap")
    
</head>

<body>
    <div class="container">
        @*参数*@
        @Html.Hidden("tracking_id", ViewData["tracking_id"], new { id = "tracking_id" })
        @Html.Hidden("user_detailed", ViewData["user_detailed"], new { id = "user_detailed" })

            @if (tuplist != null)
            {
                foreach (var menue in tuplist)
                {
                    switch (menue.Item1)
                    {
                        case "20220510085233":
                            @*总结报告*@
                            <div class="form-group" id="divGroup">
                                <div class="panel panel-info">
                                    <div class="panel-heading">
                                        <h3 class="panel-title">
                                            <a id="btnToGroup" data-toggle="collapse" data-parent="#accordion" href="#collapseGroup">
                                                <span class="span_sanjiaor"></span><strong>总结</strong>报告
                                            </a>
                                        </h3>
                                    </div>

                                    <div id="collapseGroup" class="panel-collapse collapse">
                                        <div id="collapseExampleGroup" class="panel-body">
                                            @*返回分部视图*@
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <hr />
                            break;
                        case "20220510084303":
                        @*FAE分析报告*@
                        <div class="form-group" id="divFae">
                            <div class="panel panel-info">
                                <div class="panel-heading">
                                    <h3 class="panel-title">
                                        <a id="btnToFae" data-toggle="collapse" data-parent="#accordion" href="#collapseFae">
                                            <span class="span_sanjiaor"></span><strong>FAE</strong>分析报告
                                        </a>
                                    </h3>
                                </div>

                                <div id="collapseFae" class="panel-collapse collapse">
                                    <div id="collapseExampleFae" class="panel-body">
                                        @*返回分部视图*@
                                    </div>
                                </div>
                            </div>
                        </div>
                        <hr />
                            break;
                        case "20220510085103":
                        @*ME分析报告*@
                        <div class="form-group" id="divMe">
                            <div class="panel panel-info">
                                <div class="panel-heading">
                                    <h3 class="panel-title">
                                        <a id="btnToMe" data-toggle="collapse" data-parent="#accordion" href="#collapseMe">
                                            <span class="span_sanjiaor"></span><strong>ME</strong>分析报告
                                        </a>
                                    </h3>
                                </div>

                                <div id="collapseMe" class="panel-collapse collapse">
                                    <div id="collapseExampleMe" class="panel-body">
                                        @*返回分部视图*@
                                    </div>
                                </div>
                            </div>
                        </div>
                        <hr />
                            break;
                        case "20220510085043":
                        @*EE分析报告*@
                        <div class="form-group" id="divEe">
                            <div class="panel panel-info">
                                <div class="panel-heading">
                                    <h3 class="panel-title">
                                        <a id="btnToEe" data-toggle="collapse" data-parent="#accordion" href="#collapseEe">
                                            <span class="span_sanjiaor"></span><strong>EE</strong>分析报告
                                        </a>
                                    </h3>
                                </div>

                                <div id="collapseEe" class="panel-collapse collapse">
                                    <div id="collapseExampleEe" class="panel-body">
                                        @*返回分部视图*@
                                    </div>
                                </div>
                            </div>
                        </div>
                        <hr />
                            break;
                        case "20220510085232":
                        @*物料信息排查*@
                        <div class="form-group" id="divMaterials">
                            <div class="panel panel-info">
                                <div class="panel-heading">
                                    <h3 class="panel-title">
                                        <a id="btnToMaterials" data-toggle="collapse" data-parent="#accordion" href="#collapseMaterials">
                                            <span class="span_sanjiaor"></span><strong>物料</strong>信息排查
                                        </a>
                                    </h3>
                                </div>

                                <div id="collapseMaterials" class="panel-collapse collapse">
                                    <div id="collapseExampleMaterials" class="panel-body">
                                        @*返回分部视图*@
                                    </div>
                                </div>
                            </div>
                        </div>
                        <hr />
                            break;
                        case "20220510085226":
                        @*SMT信息排查*@
                        <div class="form-group" id="divSmt">
                            <div class="panel panel-info">
                                <div class="panel-heading">
                                    <h3 class="panel-title">
                                        <a id="btnToSmt" data-toggle="collapse" data-parent="#accordion" href="#collapseSmt">
                                            <span class="span_sanjiaor"></span><strong>SMT</strong>信息排查
                                        </a>
                                    </h3>
                                </div>

                                <div id="collapseSmt" class="panel-collapse collapse">
                                    <div id="collapseExampleSmt" class="panel-body">
                                        @*返回分部视图*@
                                    </div>
                                </div>
                            </div>
                        </div>
                        <hr />
                            break;
                        case "20220510085151":
                        @*组装信息排查*@
                        <div class="form-group" id="divBe">
                            <div class="panel panel-info">
                                <div class="panel-heading">
                                    <h3 class="panel-title">
                                        <a id="btnToBe" data-toggle="collapse" data-parent="#accordion" href="#collapseBe">
                                            <span class="span_sanjiaor"></span><strong>组装</strong>信息排查
                                        </a>
                                    </h3>
                                </div>

                                <div id="collapseBe" class="panel-collapse collapse">
                                    <div id="collapseExampleBe" class="panel-body">
                                        @*返回分部视图*@
                                    </div>
                                </div>
                            </div>
                        </div>
                        <hr />
                            break;
                        case "20220510085229":
                        @*测试信息排查*@
                        <div class="form-group" id="divTest">
                            <div class="panel panel-info">
                                <div class="panel-heading">
                                    <h3 class="panel-title">
                                        <a id="btnToTest" data-toggle="collapse" data-parent="#accordion" href="#collapseTest">
                                            <span class="span_sanjiaor"></span><strong>测试</strong>信息排查
                                        </a>
                                    </h3>
                                </div>

                                <div id="collapseTest" class="panel-collapse collapse">
                                    <div id="collapseExampleTest" class="panel-body">
                                        @*返回分部视图*@
                                    </div>
                                </div>
                            </div>
                        </div>
                        <hr />
                            break;
                    }
                }
            }
        
        <!-- loading -->
        <div class="modal fade" id="loading" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" data-backdrop='static'>
            <div class="modal-dialog" role="document">
                <div class="modal-content">
                    <div class="modal-header">
                        <h4 class="modal-title" id="myModalLabel">提示</h4>
                    </div>
                    <div class="modal-body">
                        请稍候。。。<span id="result"></span>
                        <img src="~/Content/Loading/loading.gif" />
                    </div>
                </div>
            </div>
        </div>

    </div>

    <div class="btn-group-vertical" style="position:absolute;right:20px;top:20px;">
        <div id="divLocationGroup" class="btn btn-primary">总结报告</div>
        <div id="divLocationFae" class="btn btn-primary">FAE分析报告</div>
        <div id="divLocationMe" class="btn btn-primary">ME分析报告</div>
        <div id="divLocationEe" class="btn btn-primary">EE分析报告</div>
        <div id="divLocationMaterials" class="btn btn-primary">物料信息排查</div>
        <div id="divLocationSmt" class="btn btn-primary">SMT信息排查</div>
        <div id="divLocationBe" class="btn btn-primary">组装信息排查</div>
        <div id="divLocationTest" class="btn btn-primary">测试信息排查</div>
    </div>
    

    @Scripts.Render("~/bundles/jqueryAjax")
    @Scripts.Render("~/bundles/bootstrap")
    <script type="text/javascript">
        var tracking_id = $("#tracking_id").val();
        var user_detailed = $("#user_detailed").val();

        $(function () {
            //点击折叠时运行该函数
            $('.panel-info').on('hide.bs.collapse show.bs.collapse', function (e) {

                var $this = $(this)
                $this.find("span").toggleClass("span_sanjiaod");
                $this.find("span").toggleClass("span_sanjiaor");
            });
            //预加载
            $("#btnToGroup").click();
        })

        //Group Report
        $("#btnToGroup").click(function () {
            var category_id = 20;
            $.ajax({
                type: 'POST',
                url: '/AdminReportEdit/PaertViewIndexParGroup',
                data: '{tracking_id: ' + tracking_id + ',category_id: ' + category_id + '}',
                dataType: "html",
                contentType: 'application/json;charset=utf-8',
                async: true,
                beforeSend: beforeSend,
                success: function (data) {
                    $("#collapseExampleGroup").html(data);
                },
                error: function (data) {
                    alert("失败:" + data[0])
                },
                complete: complete
            });
            $(this).unbind("click");
        });
        //Fae Report
        $("#btnToFae").click(function () {
            var category_id = 1;
            $.ajax({
                type: 'POST',
                url: '/AdminReportEdit/PaertViewIndexParFae',
                data: '{tracking_id: ' + tracking_id + ',category_id: ' + category_id + '}',
                dataType: "html",
                contentType: 'application/json;charset=utf-8',
                async: true,
                beforeSend: beforeSend,
                success: function (data) {
                    $("#collapseExampleFae").html(data);
                },
                error: function (data) {
                    alert("失败:" + data[0])
                },
                complete: complete
            });
            $(this).unbind("click");
        });
        //Me Report
        $("#btnToMe").click(function () {
            var category_id = 2;//文件类型-ParFileUpload.cs类
            $.ajax({
                type: 'POST',
                url: '/AdminReportEdit/PaertViewIndexParMe',
                data: '{tracking_id: ' + tracking_id + ',category_id: ' + category_id + '}',
                dataType: "html",
                contentType: 'application/json;charset=utf-8',
                async: true,
                beforeSend: beforeSend,//发送请求
                success: function (data) {
                    $("#collapseExampleMe").html(data);//ME分析报告展开页
                },
                error: function (data) {
                    alert("失败:" + data[0])
                },
                complete: complete//请求完成
            });
            //click事件执行一次
            $(this).unbind("click");
        });
        //Ee Report
        $("#btnToEe").click(function () {
            var category_id = 3;
            $.ajax({
                type: 'POST',
                url: '/AdminReportEdit/PaertViewIndexParEe',
                data: '{tracking_id: ' + tracking_id + ',category_id: ' + category_id + '}',
                dataType: "html",
                contentType: 'application/json;charset=utf-8',
                async: true,
                beforeSend: beforeSend,
                success: function (data) {
                    $("#collapseExampleEe").html(data);
                },
                error: function (data) {
                    alert("失败:" + data[0])
                },
                complete: complete
            });
            $(this).unbind("click");
        });
        //Materials Report
        $("#btnToMaterials").click(function () {
            var category_id = 4;
            $.ajax({
                type: 'POST',
                url: '/AdminReportEdit/PaertViewIndexParMaterials',
                data: '{tracking_id: ' + tracking_id + ',category_id: ' + category_id + '}',
                dataType: "html",
                contentType: 'application/json;charset=utf-8',
                async: true,
                beforeSend: beforeSend,
                success: function (data) {
                    $("#collapseExampleMaterials").html(data);
                },
                error: function (data) {
                    alert("失败:" + data[0])
                },
                complete: complete
            });
            $(this).unbind("click");
        });
        function MaterialsInsert() {//Insert Get

            $.ajax({
                url: "PaertViewIndexParMaterialsInsert",
                data: { "tracking_id": tracking_id},
                method: "get",
                success: function (result) {
                    $("#parMaterialsModal-body").html(result);
                    $("#ParMaterialsModal").modal();
                }
            });
        }
        function ParMaterialsSubmit() {//Insert Post
            $.ajax({
                type: "POST",
                dataType: "json",
                url: "PaertViewIndexParMaterialsInsert",
                data: $("#fromParMaterialsSubmit").serialize(),
                success: function (result) {
                    if (result.Success == true) {
                        $("#ParMaterialsModal").modal('hide');
                        alert(result.Message);
                        showFile(4);
                    }
                    if (result.Success == false) {
                        alert(result.Message);
                    }
                },
                error: function (event) {
                    alert("异常！");
                }
            });
        }

        function MaterialsInsertHide() {//Insert Hide
            $("#ParMaterialsModal").modal('hide');
        }

        function MaterialsUpdate(id) {//Update Get
            var id = parseInt(id);
                $.ajax({
                    url: "/AdminReportEdit/PaertViewIndexParMaterialsUpdate",
                    data: { id: id },
                    method: "get",
                    success: function (result) {
                        $("#parUpdateMaterialsModal-body").html(result);
                        $("#ParUpdateMaterialsModal").modal();
                    }
                });
        }

        function ParUpdateMaterialsSubmit() {//Insert Post

            var id = parseInt($("#txtId").val());
            var tracking_id = parseInt($("#txtTracking_id").val());
            var tag_number = $("#txtTag_number").val();
            var lenovo_pn = $("#txtLenovo_pn").val();
            var odm_pn = $("#txtOdm_pn").val();
            var supplier = $("#txtSupplier").val();
            var suspect_batch = $("#txtSuspect_batch").val();
            var suspect_lot = $("#txtSuspect_lot").val();
            var other_batch = $("#txtOther_batch").val();
            var other_batch_number = $("#txtOther_batch_number").val();
            var alternative_materials = $("#txtAlternative_materials").val();
            var product = $("#txtProduct").val();
            var is_npi_issue = $("#txtIs_npi_issue").val();
            var remark = $("#txtRemark").val();
            var log_result = $("#txtLog_result").val();
            $.ajax({
                type: "POST",
                url: "/AdminReportEdit/PaertViewIndexParMaterialsUpdate",
                dataType: "json",
                contentType: 'application/json;charset=utf-8',
                async: true,
                data: JSON.stringify({
                    id: id, tracking_id: tracking_id, tag_number: tag_number, lenovo_pn: lenovo_pn, odm_pn: odm_pn, supplier: supplier,
                    suspect_batch: suspect_batch, suspect_lot: suspect_lot, other_batch: other_batch, other_batch_number: other_batch_number,
                    alternative_materials: alternative_materials, product: product, is_npi_issue: is_npi_issue, remark: remark, log_result: log_result
                }),
                success: function (result) {
                    if (result.Success == true) {
                        $("#ParUpdateMaterialsModal").modal('hide');
                        alert(result.Message);
                        showFile(4);
                    }
                    if (result.Success == false) {
                        alert(result.Message);
                    }
                },
                error: function (event) {
                    alert("异常！");
                }
            });
        }

        function MaterialsUpdateHide() {//Update Hide
            $("#ParUpdateMaterialsModal").modal('hide');
        }

        //Smt Report
        $("#btnToSmt").click(function () {
            var category_id = 8;
            $.ajax({
                type: 'POST',
                url: '/AdminReportEdit/PaertViewIndexParSmt',
                data: '{tracking_id: ' + tracking_id + ',category_id: ' + category_id + '}',
                dataType: "html",
                contentType: 'application/json;charset=utf-8',
                async: true,
                beforeSend: beforeSend,
                success: function (data) {
                    $("#collapseExampleSmt").html(data);
                },
                error: function (data) {
                    alert("失败:" + data[0])
                },
                complete: complete
            });
            $(this).unbind("click");
        });
        //Be Report
        $("#btnToBe").click(function () {
            var category_id = 12;
            $.ajax({
                type: 'POST',
                url: '/AdminReportEdit/PaertViewIndexParBe',
                data: '{tracking_id: ' + tracking_id + ',category_id: ' + category_id + '}',
                dataType: "html",
                contentType: 'application/json;charset=utf-8',
                async: true,
                beforeSend: beforeSend,
                success: function (data) {
                    $("#collapseExampleBe").html(data);
                },
                error: function (data) {
                    alert("失败:" + data[0])
                },
                complete: complete
            });
            $(this).unbind("click");
        });
        //Test Report
        $("#btnToTest").click(function () {
            var category_id = 16;
            $.ajax({
                type: 'POST',
                url: '/AdminReportEdit/PaertViewIndexParTest',
                data: '{tracking_id: ' + tracking_id + ',category_id: ' + category_id + '}',
                dataType: "html",
                contentType: 'application/json;charset=utf-8',
                async: true,
                beforeSend: beforeSend,
                success: function (data) {
                    $("#collapseExampleTest").html(data);
                },
                error: function (data) {
                    alert("失败:" + data[0])
                },
                complete: complete
            });
            $(this).unbind("click");
        });
        //upload
        function upFile(category_id) {
            var _id = "";
            var alertId = "";
            var _upfile_id = "";
            switch (category_id) {
                case 1: _id = "#formFileFae"; alertId = "saveFaeAlert"; _upfile_id = "UpFileFae"; break;
                case 2: _id = "#formFileMe"; alertId = "saveMeAlert"; _upfile_id = "UpFileMe"; break;
                case 3: _id = "#formFileEe"; alertId = "saveEeAlert"; _upfile_id = "UpFileEe"; break;
                case 4: _id = "#formFileMaterials"; alertId = "saveMaterialsAlert"; _upfile_id = "UpFileMaterials_1"; break;
                case 8: _id = "#formFileSmt"; alertId = "saveSmtAlert"; _upfile_id = "UpFileSmt_man"; break;
                case 9: _id = "#formFileSmt"; alertId = "saveSmtAlert"; _upfile_id = "UpFileSmt_machine"; break;
                case 10: _id = "#formFileSmt"; alertId = "saveSmtAlert"; _upfile_id = "UpFileSmt_method"; break;
                case 11: _id = "#formFileSmt"; alertId = "saveSmtAlert"; _upfile_id = "UpFileSmt_environments"; break;
                case 12: _id = "#formFileBe"; alertId = "saveBeAlert"; _upfile_id = "UpFileBe_man"; break;
                case 13: _id = "#formFileBe"; alertId = "saveBeAlert"; _upfile_id = "UpFileBe_machine"; break;
                case 14: _id = "#formFileBe"; alertId = "saveBeAlert"; _upfile_id = "UpFileBe_method"; break;
                case 15: _id = "#formFileBe"; alertId = "saveBeAlert"; _upfile_id = "UpFileBe_environments"; break;
                case 16: _id = "#formFileTest"; alertId = "saveTestAlert"; _upfile_id = "UpFileTest_fe"; break;
                case 17: _id = "#formFileTest"; alertId = "saveTestAlert"; _upfile_id = "UpFileTest_be"; break;
                case 18: _id = "#formFileTest"; alertId = "saveTestAlert"; _upfile_id = "UpFileTest_cfc"; break;
                case 19: _id = "#formFileTest"; alertId = "saveTestAlert"; _upfile_id = "UpFileTest_sdbu"; break;
                case 20: _id = "#formFileGroup"; alertId = "saveGroupAlert"; _upfile_id = "UpFileGroup"; break;
                case 21: _id = "#formFileSmt"; alertId = "saveSmtAlert"; _upfile_id = "UpFileSmt_materials"; break;
            }

            var file = document.getElementById(_upfile_id).files[0];
            if (!file) {
                var boarddiv = "<div id='warning-alert' class='alert alert-warning'><a href='#' class='close' data-dismiss='alert'>&times;</a><strong>警告！</strong>请选择文件。</div>";
                failAlert(boarddiv,alertId);
                return;
            }
            var size = file.size / 1024 / 1024;
            if (size > 50) {
                var boarddiv = "<div id='warning-alert' class='alert alert-warning'><a href='#' class='close' data-dismiss='alert'>&times;</a><strong>警告！</strong>文件不能大于50M。</div>";
                failAlert(boarddiv, alertId);
                return;
            }

            if (confirm('【保存提醒】上传文件时，未保存的数据将会丢失，确认继续上传吗？') == false) {
                return;
            }
            
            $(_id).ajaxSubmit({
                url: "/AdminReportEdit/UploadFile",
                type: "post",
                dataType: "json",
                beforeSend: beforeSend,//发送请求
                success: function (data) {
                    if (data == "0") {
                        var boarddiv = "<div id='warning-alert' class='alert alert-warning'><a href='#' class='close' data-dismiss='alert'>&times;</a><strong>警告！</strong>文件上传失败，服务器请求超时。</div>";
                        failAlert(boarddiv, alertId);
                    }
                    else {
                        switch (category_id) {
                            case 1: insertFile(1, data); break;
                            case 2: insertFile(2, data); break;
                            case 3: insertFile(3, data); break;
                            case 4: insertFile(4, data); break;
                            case 8: insertFile(8, data); break;
                            case 9: insertFile(9, data); break;
                            case 10: insertFile(10, data); break;
                            case 11: insertFile(11, data); break;
                            case 12: insertFile(12, data); break;
                            case 13: insertFile(13, data); break;
                            case 14: insertFile(14, data); break;
                            case 15: insertFile(15, data); break;
                            case 16: insertFile(16, data); break;
                            case 17: insertFile(17, data); break;
                            case 18: insertFile(18, data); break;
                            case 19: insertFile(19, data); break;
                            case 20: insertFile(20, data); break;
                            case 21: insertFile(21, data); break;
                        }
                    }
                },
                error: function (data) {
                    var boarddiv = "<div id='warning-alert' class='alert alert-warning'><a href='#' class='close' data-dismiss='alert'>&times;</a><strong>警告！</strong>文件上传失败，服务器请求超时。</div>";
                    failAlert(boarddiv, alertId);
                }
            });
        }
        //inset
        function insertFile(category_id, file_url) {
            $.ajax({
                type: 'POST',
                url: '/AdminReportEdit/InsertFile',//控制器活动,返回一个分部视图,并且给分部视图传递数据.
                data: '{tracking_id: ' + tracking_id + ',file_url: "' + file_url + '",category_id: "' + category_id + '"}',//传给服务器的数据(即后台方法的参数,参数类型要一致才可以)
                dataType: "json",
                contentType: 'application/json;charset=utf-8',
                async: true,
                success: function (data) {
                    switch (data) {
                        case 1: showFile(1); break;
                        case 2: showFile(2); break;
                        case 3: showFile(3); break;
                        case 4: showFile(4); break;
                        case 8: showFile(8); break;
                        case 9: showFile(9); break;
                        case 10: showFile(10); break;
                        case 11: showFile(11); break;
                        case 12: showFile(12); break;
                        case 13: showFile(13); break;
                        case 14: showFile(14); break;
                        case 15: showFile(15); break;
                        case 16: showFile(16); break;
                        case 17: showFile(17); break;
                        case 18: showFile(18); break;
                        case 19: showFile(19); break;
                        case 20: showFile(20); break;
                        case 21: showFile(21); break;
                    }
                },
                error: function (data) {
                    var boarddiv = "<div id='warning-alert' class='alert alert-warning'><a href='#' class='close' data-dismiss='alert'>&times;</a><strong>警告！</strong>文件上传失败，服务器请求超时。</div>";
                    failAlert(boarddiv);
                }
            });
        }
        //show
        function showFile(category_id) {
            var url = '';
            var alertId = "";
            var collapseExample = "";
            switch (category_id) {
                case 1: _url = '/AdminReportEdit/PaertViewIndexParFae'; alertId = "saveFaeAlert"; collapseExample = "#collapseExampleFae"; break;
                case 2: _url = '/AdminReportEdit/PaertViewIndexParMe'; alertId = "saveMeAlert"; collapseExample = "#collapseExampleMe"; break;
                case 3: _url = '/AdminReportEdit/PaertViewIndexParEe'; alertId = "saveEeAlert"; collapseExample = "#collapseExampleEe"; break;
                case 4: _url = '/AdminReportEdit/PaertViewIndexParMaterials'; alertId = "saveMaterialsAlert"; collapseExample = "#collapseExampleMaterials"; break;
                case 8: _url = '/AdminReportEdit/PaertViewIndexParSmt'; alertId = "saveSmtAlert"; collapseExample = "#collapseExampleSmt"; break;
                case 9: _url = '/AdminReportEdit/PaertViewIndexParSmt'; alertId = "saveSmtAlert"; collapseExample = "#collapseExampleSmt"; break;
                case 10: _url = '/AdminReportEdit/PaertViewIndexParSmt'; alertId = "saveSmtAlert"; collapseExample = "#collapseExampleSmt"; break;
                case 11: _url = '/AdminReportEdit/PaertViewIndexParSmt'; alertId = "saveSmtAlert"; collapseExample = "#collapseExampleSmt"; break;
                case 12: _url = '/AdminReportEdit/PaertViewIndexParBe'; alertId = "saveBeAlert"; collapseExample = "#collapseExampleBe"; break;
                case 13: _url = '/AdminReportEdit/PaertViewIndexParBe'; alertId = "saveBeAlert"; collapseExample = "#collapseExampleBe"; break;
                case 14: _url = '/AdminReportEdit/PaertViewIndexParBe'; alertId = "saveBeAlert"; collapseExample = "#collapseExampleBe"; break;
                case 15: _url = '/AdminReportEdit/PaertViewIndexParBe'; alertId = "saveBeAlert"; collapseExample = "#collapseExampleBe"; break;
                case 16: _url = '/AdminReportEdit/PaertViewIndexParTest'; alertId = "saveTestAlert"; collapseExample = "#collapseExampleTest"; break;
                case 17: _url = '/AdminReportEdit/PaertViewIndexParTest'; alertId = "saveTestAlert"; collapseExample = "#collapseExampleTest"; break;
                case 18: _url = '/AdminReportEdit/PaertViewIndexParTest'; alertId = "saveTestAlert"; collapseExample = "#collapseExampleTest"; break;
                case 19: _url = '/AdminReportEdit/PaertViewIndexParTest'; alertId = "saveTestAlert"; collapseExample = "#collapseExampleTest"; break;
                case 20: _url = '/AdminReportEdit/PaertViewIndexParGroup'; alertId = "saveGroupAlert"; collapseExample = "#collapseExampleGroup"; break;
                case 21: _url = '/AdminReportEdit/PaertViewIndexParSmt'; alertId = "saveSmtAlert"; collapseExample = "#collapseExampleSmt"; break;
            }

            $.ajax({
                type: 'POST',
                url: _url,//控制器活动,返回一个分部视图,并且给分部视图传递数据.
                data: '{tracking_id: ' + tracking_id + ',category_id: ' + category_id + '}',//传给服务器的数据(即后台方法的参数,参数类型要一致才可以)
                dataType: "html",
                contentType: 'application/json;charset=utf-8',//数据类型
                async: true,//异步
                beforeSend: beforeSend,//发送请求
                success: function (data) //成功后的回调方法
                {
                    $(collapseExample).html(data);//data--对应的分部视图页面内容.
                    var boarddiv = "<div id='success-alert' class='alert alert-success'><a href='#' class='close' data-dismiss='alert'>&times;</a><strong>成功！</strong>操作成功。</div>";
                    successAlert(boarddiv,alertId);
                },
                error: function (data) {
                    var boarddiv = "<div id='warning-alert' class='alert alert-warning'><a href='#' class='close' data-dismiss='alert'>&times;</a><strong>警告！</strong>刷新失败，服务器请求超时。</div>";
                    failAlert(boarddiv,alertId);
                },
                complete: complete//请求完成
            });
        }
        //success
        function successAlert(boarddiv,alertId) {
            $(document.getElementById(alertId)).append(boarddiv);
            window.setTimeout(function () {
                $("#success-alert").alert('close');
            }, 2000);
        }
        //warning
        function failAlert(boarddiv,alertId) {
            $(document.getElementById(alertId)).append(boarddiv);
            window.setTimeout(function () {
                $("#warning-alert").alert('close');
            }, 2000);
        }

        $(window).scroll(function (e) {
            console.log($(window).scrollTop());
            if ($(window).scrollTop() > $('#divGroup').offset().top) {
                $('.nav').css({ 'position': 'fixed' });
                console.log('ss');
            } else {
                $('.nav').css({ 'position': 'absolute' });
            }
        })

        //loading begin
        function beforeSend(XMLHttpRequest) {
            $('#loading').modal('show');
        }
        //loading end
        function complete(XMLHttpRequest, textStatus) {
            $('#loading').modal('hide');
        }

        $(window).scroll(function (e) {
            console.log($(window).scrollTop());
            if ($(window).scrollTop() > $('#divGroup').offset().top) {
                $('.btn-group-vertical').css({ 'position': 'fixed' });
                console.log('ss');
            } else {
                $('.btn-group-vertical').css({ 'position': 'absolute' });
            }
        })

        $("#divLocationGroup").click(function () {
            $('body,html').animate({ scrollTop: $('#divGroup').offset().top }, 500);
        });
        $("#divLocationFae").click(function () {
            $('body,html').animate({ scrollTop: $('#divFae').offset().top }, 500);
        });
        $("#divLocationMe").click(function () {
            $('body,html').animate({ scrollTop: $('#divMe').offset().top }, 500);
        });
        $("#divLocationEe").click(function () {
            $('body,html').animate({ scrollTop: $('#divEe').offset().top }, 500);
        });
        $("#divLocationMaterials").click(function () {
            $('body,html').animate({ scrollTop: $('#divMaterials').offset().top }, 500);
        });
        $("#divLocationSmt").click(function () {
            $('body,html').animate({ scrollTop: $('#divSmt').offset().top }, 500);
        });
        $("#divLocationBe").click(function () {
            $('body,html').animate({ scrollTop: $('#divBe').offset().top }, 500);
        });
        $("#divLocationTest").click(function () {
            $('body,html').animate({ scrollTop: $('#divTest').offset().top }, 500);
        });
    </script>
</body>

</html>