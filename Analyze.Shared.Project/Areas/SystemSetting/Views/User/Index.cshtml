@using Analyze.Shared.Common.User
@model CurrentUserDTO

<script src="~/Scripts/Validate/jquery.validate.min.js"></script>
<script src="~/Scripts/Validate/jquery.validate.unobtrusive.min.js"></script>
@using (Html.BeginForm("Index", "/SystemSetting/User", FormMethod.Post, new { @class = "form-horizontal", role = "form", @id = "from" }))
{
    @Html.AntiForgeryToken()
    @Html.ValidationSummary(true)
    @Html.HiddenFor(model => model.id)
    @Html.HiddenFor(model => model.password)
    @Html.HiddenFor(model => model.status)
    <div class="form-body" style="width:70%;margin-top:30px;">
        <div class="form-group form-md-line-input">
            <label class="col-lg-3 control-label" for="form_control_1">
                <font style="vertical-align:inherit;" class="redStar">
                    <font style="vertical-align:inherit;">
                        @Html.DisplayNameFor(c => c.username)
                    </font>
                </font>
            </label>
            <div class="col-md-9">
                @Html.TextBoxFor(m => m.username, new { @class = "form-control", @type = "text", @readonly = true })
            </div>
        </div>
        <div class="form-group form-md-line-input">
            <label class="col-lg-3 control-label" for="form_control_1">
                <font style="vertical-align:inherit;">
                    <font style="vertical-align:inherit;">
                        @Html.DisplayNameFor(c => c.employee_name)
                    </font>
                </font>
            </label>
            <div class="col-md-9">
                @Html.TextBoxFor(m => m.employee_name, new { @class = "form-control", @type = "text", @readonly = true })
                @Html.ValidationMessage("employee_name", new { @style = "color:yellow" })
            </div>
        </div>
        <div class="form-group form-md-line-input">
            <label class="col-lg-3 control-label" for="form_control_1">
                <font style="vertical-align:inherit;">
                    <font style="vertical-align:inherit;">
                        @Html.DisplayNameFor(c => c.employee_itcode)
                    </font>
                </font>
            </label>
            <div class="col-md-9">
                @Html.TextBoxFor(m => m.employee_itcode, new { @class = "form-control", @type = "text", @autocomplete = "off", @placeholder = "请输入..." })
                @Html.ValidationMessage("employee_itcode", new { @style = "color:yellow" })
            </div>
        </div>
        <div class="form-group form-md-line-input">
            <label class="col-lg-3 control-label" for="form_control_1">
                <font style="vertical-align:inherit;">
                    <font style="vertical-align:inherit;">
                        @Html.DisplayNameFor(c => c.sex)
                    </font>
                </font>
            </label>
            <div class="col-md-9">
                @Html.TextBoxFor(m => m.sex, new { @class = "form-control", @type = "text", @autocomplete = "off", @placeholder = "请输入..." })
                @Html.ValidationMessage("sex", new { @style = "color:yellow" })
            </div>
        </div>
        <div class="form-group form-md-line-input">
            <label class="col-lg-3 control-label" for="form_control_1">
                <font style="vertical-align:inherit;">
                    <font style="vertical-align:inherit;">
                        @Html.DisplayNameFor(c => c.tel)
                    </font>
                </font>
            </label>
            <div class="col-md-9">
                @Html.TextBoxFor(m => m.tel, new { @class = "form-control", @type = "text", @autocomplete = "off", @placeholder = "请输入..." })
                @Html.ValidationMessage("tel", new { @style = "color:yellow" })
            </div>
        </div>
        <div class="form-group form-md-line-input">
            <label class="col-lg-3 control-label" for="form_control_1">
                <font style="vertical-align:inherit;">
                    <font style="vertical-align:inherit;">
                        @Html.DisplayNameFor(c => c.email)
                    </font>
                </font>
            </label>
            <div class="col-md-9">
                @Html.TextBoxFor(m => m.email, new { @class = "form-control", @type = "text", @autocomplete = "off", @placeholder = "请输入..." })
                @Html.ValidationMessage("email", new { @style = "color:yellow" })
            </div>
        </div>
        <div class="form-group form-md-line-input">
            <label class="col-lg-3 control-label" for="form_control_1">
                <font style="vertical-align:inherit;">
                    <font style="vertical-align:inherit;">
                        @Html.DisplayNameFor(c => c.job_id)
                    </font>
                </font>
            </label>
            <div class="col-md-9">
                @Html.DropDownListFor(m => m.job_id, ViewBag.sysjob as IEnumerable<SelectListItem>, new { @class = "btn dropdown-toggle form-control", @disabled = "disabled" })
                @Html.HiddenFor(m => m.job_id)
            </div>
        </div>
        <div class="form-group form-md-line-input">
            <label class="col-lg-3 control-label" for="form_control_1">
                <font style="vertical-align:inherit;">
                    <font style="vertical-align:inherit;">
                        @Html.DisplayNameFor(c => c.dept_id)
                    </font>
                </font>
            </label>
            <div class="col-md-9">
                @Html.DropDownListFor(m => m.dept_id, ViewBag.sysdept as IEnumerable<SelectListItem>, new { @class = "btn dropdown-toggle form-control", @disabled = "disabled" })
                @Html.HiddenFor(m => m.dept_id)
            </div>
        </div>
        <br>
        <div class="form-group form-md-line-input">
            <label class="col-lg-3 control-label" for="form_control_1">
                <font style="vertical-align:inherit;">
                    <font style="vertical-align:inherit;">
                       
                    </font>
                </font>
            </label>
            <div class="col-md-9">
                <button class="btn btn-success" type="button" onclick="UserEditSubmit()">修改信息</button>
            </div>
        </div>
    </div>
}

<script type="text/javascript">
    function UserEditSubmit() {
        $.ajax({
            type: "POST",
            dataType: "json",
            url: "Edit",
            data: $("#from").serialize(),
            success: function (result) {
                if (result.Success == true) {
                    alert(result.Message);
                }
                if (result.Success == false) {
                    alert(result.Message);
                }
            },
            error: function (event) {
                alert("异常！");
            }
        });
    }
</script>


